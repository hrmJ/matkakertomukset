
```{r load, echo=FALSE}
library(pander)
library(knitr)
library(jsonlite)
library(ggplot2)
library(readr)
source("r/utilities.R")
headverbs <- as.data.frame(fromJSON("../data/headverbs.json"))
genstats <- as.data.frame(fromJSON("../data/genstats.json"))
fsstats1 <- as.data.frame(fromJSON("../data/firstsentence.json"))

panderOptions('table.alignment.default', function(df) ifelse(sapply(df, is.numeric), 'right', 'left'))
panderOptions('table.split.table',400)

```

About the data
==============

* Paragraphs discussing *accommodation*

This theme was one of the topics suggested in the writing instruction for
the report. The part of the report that concerns accommodation is as follows:

    Asuminen: Oliko asunto valmiina saavuttuasi paikalle? Vuokrataso? Onko sinulla
    suosituksia asunnon hankinnassa tai muita neuvoja asumisen suhteen?


General statistical information about the data
==================================

* Total amount of texts: `r genstats["tekstit"]`
* Texts where accommodation as a topic not discussed: `r genstats["kpl_0"]`
* Texts with 1 paragraphs about accommodation: `r genstats["kpl_1"]`
* Texts with 2 paragraphs about accommodation: `r genstats["kpl_2"]`
* Texts with 3 paragraphs about accommodation: `r genstats["kpl_3"]`
* Texts with more than 3 paragraphs about accommodation: `r genstats["kpl_n"]`
* Total number of paragraphs about accommodation: `r genstats["asumiskappaleet"]`


Introducing the topic
=====================

First, let us take a look at how the topic (accommodation) is introduced to the
reader. 

Contrary to what at least used to be the case in English [cf. e.g. @dangelo86],
Finnish writing guides do not usually advice the writer to use special *topic
sentences*: sentences that summarize the contents of a paragraph and are most often
located at the beginning of it.

BTW, from [@smith2008braddock]:

    The third of Bain’s six rules called for a statement of topic in the initial
    sentence of the paragraph. Later scholars noted that the topic sentence could
    appear in another part of the paragraph or even be implied (Rogers, 1965).
    Furthermore, in his notable study, Braddock (1974) found that only 13% of the
    expository paragraphs in his study began with a topic sentence. Braddock’s
    study has been widely cited to support the view that reading and writing
    instruction needs to be modified to account for this fact.


However, even when there is no topic sentence *per se*, the reader must at some
point begin to have an idea about what the paragraph he is reading is about. We
used the following Finnish words as indicators of the fact that the writer is
going to tell (or telling / has been telling) the reader about accommodation. We 
will be referring to these words as *topic indicators*.


```{r accommodationwords, echo=FALSE, results="asis"}

awords <- read_lines("../data/asumissanat.txt")
cat(paste(awords,collapse=", "),"\n")

```

Interestingly enough, our data shows that out of the total `r nrow(fsstats1)`
texts that discuss accommodation `r nrow(fsstats1) - table(fsstats1$asuminen_expressed)["None"]`
(`r fn((nrow(fsstats1) - table(fsstats1$asuminen_expressed)["None"])/nrow(fsstats1)*100)` %)
use one of the aforementioned words in the first sentence of the first paragraph that discusses 
accommodation.

Let us now look at what these occurrences reveal about the paragraphs studied and the
writing strategies used by the authors.

Introducing strategies indicated by dependency roles
---------------------------------------------------

One way to get an idea about what kind of a strategy a writer is using to 
introduce the topic of accommodation is to look at the *dependency role*
given to the indicator word by the parser. The distribution of different dependency roles
of the topic indicators is given in table `r tabRef('tt_deproles')` :[^distexpl]

```{r accommodationwordstats, echo=FALSE, results="asis"}

do.words <- sort(table(fsstats1[fsstats1$asuminen_expressed=="dobj","indicatorword"]),decreasing=T)

tab <- table(fsstats1$asuminen_expressed[fsstats1$asuminen_expressed!="None"])
tab <- tab[tab>4]
tab <- tab[order(tab,decreasing=T)]
dftab <- as.data.frame(tab)
colnames(dftab) <- c("Dependency role","Frequency")
kable(dftab)

cat (tabRef('tt_deproles','Dependency roles of topic indicators'), "\n")

```

[^distexpl]: The data in the table covers only the cases where the indicator
word is used in the *first* sentence of the first paragraph

According to table `r tabRef('tt_deproles')` the most common dependency role is
the direct object. If we take a closer look at the cases which use a topic
indicator as the object of the first sentence, we can see that the majority
them (`r fn(prop.table(do.words)["asunto"]*100)` %) use the word *asunto* ('apartment').
Further, if we look at the head verbs of these cases, the most frequent ones are 
the following:

```{r asuntoheads, echo=FALSE, results="asis"}
asunto<-subset(fsstats1,indicatorword=="asunto"&asuminen_expressed=="dobj")
asunto.heads <- sort(table(asunto$head_of_indicator),decreasing=T)[1:6]
pander(asunto.heads)
asunto_hankkia<-subset(asunto,head_of_indicator=="hankkia")

cat(tabRef("tt_asuntoheads","Head verbs of the topic indicator 'asunto'"),"\n")
```

This statistical information gives us a clear pattern of one popular strategy for 
starting a paragraph about accommodation. This strategy is exemplified by sentences
@ee_yliopistonkautta and @ee_yksityisilta:

(@ee_yliopistonkautta) Asunnon hankin yliopiston kautta.
(@ee_yksityisilta) Hankin asunnon yksityisiltä markkinoilta.


